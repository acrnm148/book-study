> - [3.1](3.1)
> - [3.2](3.2)
> ##### ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê°ì²´, ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•
> - [3.3 CrudRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ CRUD ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•](#3.3-CrudRepository-ì¸í„°í˜ì´ìŠ¤ë¥¼-ì‚¬ìš©í•´ì„œ-CRUD-ì—°ì‚°ì„-ìˆ˜í–‰í•˜ëŠ”-ë°©ë²•)
> ##### DBë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ë°©ë²•
> - [3.4 ìŠ¤í”„ë§ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œ ë°ì´í„° ì¡°íšŒ](#3.4-ìŠ¤í”„ë§-ë°ì´í„°ë¥¼-ì‚¬ìš©í•œ-ë°ì´í„°-ì¡°íšŒ)


## 3.1

## 3.2

## 3.3 CrudRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ CRUD ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•
ğŸ“Œ spring-dataì™€ spring-data-commons ëª¨ë“ˆ
```
[build.gradle]
...
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
implementation 'org.springframework.boot:spring-boot-starter-data-redis'
...
```
- ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë§Œ ë³´ë”ë¼ë„ core, test, MVC ë“± ì—¬ëŸ¬ ëª¨ë“ˆì´ ìˆê³ 
  ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬, ìŠ¤í”„ë§ ë¶€íŠ¸, ìŠ¤í”„ë§ ë°ì´í„°, ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ë“± ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë“¤ì´ ì¡´ì¬í•¨.
- [ê³µì‹ë¬¸ì„œ](https://spring.io/projects/spring-data)
  
![image](https://github.com/acrnm148/book-study/assets/67724306/71211ea7-f2da-4af5-af3a-51b6b844d21b)

- spring-data
  - ê¸°ë³¸ ë°ì´í„° ì €ì¥ì†Œ(DB)ì— ëŒ€í•œ íŠ¹ì„±ì€ ìœ ì§€í•˜ë©°, ë°ì´í„° ì ‘ê·¼ ë°©ë²•ì— ëŒ€í•´ ì¹œìˆ™í•œ ì ‘ê·¼ ë°©ë²•ì„ ì œì‹œí•˜ëŠ” Spring ê¸°ë°˜ í”„ë¡œê·¸ë˜ë° ëª¨ë¸.
  - ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•´ ë§Œë“¤ì–´ì§„ íŠ¹ì •í•œ í•˜ìœ„ í”„ë¡œì íŠ¸ë“¤ë¡œ êµ¬ì„±ëœ ìš°ì‚°í˜• í”„ë¡œì íŠ¸.
  - CRUD ë™ì‘ì´ í•„ìš”. Spring dataëŠ” Repositoryë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µ, ê° ë°ì´í„° ì €ì¥ì†ŒëŠ” ì´ Repositoryë¥¼ êµ¬í˜„í•˜ì—¬ ìì‹ ì˜ ë°ì´í„° ì €ì¥ì†Œì— ë§ëŠ” repositoryë¥¼ ì œê³µí•œë‹¤.
    - ex) JpaRepository, MongoRepository ...
  - êµ¬ì„±
  
![image](https://github.com/acrnm148/book-study/assets/67724306/7a75017a-91ee-45b9-8b85-c40bacf5fb53)
![image](https://github.com/acrnm148/book-study/assets/67724306/38948101-730d-4e9b-a1c8-d8f586f8d8a0)
- [spring-data-commons](https://github.com/spring-projects/spring-data-commons/tree/main/src/main/java/org/springframework/data/repository) : Repsotiroy ì¸í„°í˜ì´ìŠ¤, CrudRepository, PagingAndSortingRepository, ...
- í•˜ìœ„ í”„ë¡œì íŠ¸ë“¤ : spring-data-jpa, spring-data-redis ...

â“ [Starters](https://github.com/spring-projects/spring-boot/tree/main/spring-boot-project/spring-boot-starters)
  - spring-boot-starterëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì— ì¢…ì†ì„±ì„ í¬í•¨ì‹œí‚´ìœ¼ë¡œì¨ í•„ìš”í•œ ëª¨ë“  ê´€ë ¨ ê¸°ìˆ ì„ ì›ìŠ¤í†±ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ìˆëŠ” 'í¸ë¦¬í•œ ì¢…ì†ì„± ì„¸íŠ¸'


### 1. Repository ì¸í„°í˜ì´ìŠ¤
- `spring-data-commons` ëª¨ë“ˆì— í¬í•¨ë˜ì–´ ìˆìŒ.
- spring data repository ëª¨ë“ˆì€ Repository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„° ì†ŒìŠ¤ ì ‘ê·¼ì„ ì¶”ìƒí™”
- Repository ì¸í„°í˜ì´ìŠ¤ëŠ” `ë„ë©”ì¸ í´ë˜ìŠ¤` + `ì‹ë³„ì íƒ€ì…`ì„ í•„ìš”ë¡œ í•œë‹¤.
  - ë„ë©”ì¸ í´ë˜ìŠ¤ = DBì— ì €ì¥ë˜ì–´ ê´€ë¦¬ë˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹° í´ë˜ìŠ¤
- ë©”ì„œë“œë‚˜ ìƒìˆ˜ë¥¼ í¬í•¨ X, ì˜¤ì§ ê°ì²´ì˜ ëŸ°íƒ€ì„ íƒ€ì… ì •ë³´ë§Œì„ ì•Œë ¤ì£¼ëŠ” ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤

### 2. CrudRepository
- Repository ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì€ í•˜ìœ„ ì¸í„°í˜ì´ìŠ¤
- CRUD ì—°ì‚°ì„ í¬í•¨í•˜ê³  ìˆìŒ.
- ì œë„ˆë¦­ íƒ€ì… T : ë„ë©”ì¸ í´ë˜ìŠ¤, ID : ë„ë©”ì¸ í´ë˜ìŠ¤ì˜ ì‹ë³„ì
  
	![image](https://github.com/acrnm148/book-study/assets/67724306/466c32ce-0fed-4e4c-9ec0-68b244077d90)


### 3. PagingAndSortingRepository ì¸í„°í˜ì´ìŠ¤
- CrudRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ì¸í„°í˜ì´ìŠ¤
- í˜ì´ì§•, ì •ë ¬ ê¸°ëŠ¥ í¬í•¨
  
	![image](https://github.com/acrnm148/book-study/assets/67724306/5d82fd5e-2a11-48eb-9110-41f4c6239e84)



## 3.3.1 ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•´ì„œ ë„ë©”ì¸ ê°ì²´ë¥¼ RDBMSì—ì„œ ê´€ë¦¬
- ë„ë©”ì¸ í´ë˜ìŠ¤
```java
@Entity
@Table(name="PROFILE")
@AllArgsConstructor
@NoArgsConstructor
public class Profile {
    @Id
    @Column(name = "mmbr_num")
    private Long memberNum;

    @Column(name = "ncnm")
    private String nickName;

    @Column(name = "pfile_phtg_file_urladrs")
    private String imgUrl;
}
```
- ì£¼ìš” annotation
```java
@Entity : JPAë¡œ ê´€ë¦¬ë˜ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤
@Table : í•´ë‹¹ ì—”í‹°í‹°ê°€ ì €ì¥ë˜ëŠ” í…Œì´ë¸” ì´ë¦„ (ì§€ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì—”í‹°í‹° ì´ë¦„ì„ í…Œì´ë¸” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©.)
@Column : ìë°” í•„ë“œ ì •ë³´ì™€ í…Œì´ë¸” ì»¬ëŸ¼ ì •ë³´ë¥¼ ë§¤í•‘ => camelCaseë¼ë©´ ì»¬ëŸ¼ëª…ì€ camel_case ì–¸ë”ìŠ¤ì½”ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ë§Œë“¤ì–´ì§„ë‹¤.
@Id : í…Œì´ë¸”ì˜ PK (ìœ ì¼í•œ ë°ì´í„°ë¡œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì‹ë³„ì) => â“JPAì— ì˜í•´ ìë™ ìƒì„±ë˜ë¯€ë¡œ ìƒì„±ìì—ëŠ” idí•„ë“œê°€ í¬í•¨ë¼ìˆì§€ ì•ŠìŒ.
@GeneratedValue : ì‹ë³„ìë¡œ ì‚¬ìš©ë˜ëŠ” idê°’ì´ ìë™ ìƒì„±ë¨(ê°œë°œìê°€ ì§€ì •X) => ìë™ ìƒì„± ì „ëµì„ ì§€ì •í•  ìˆ˜ ìˆìŒ.
	1. Table: í‚¤ í…Œì´ë¸”ì„ ë”°ë¡œ ë§Œë“¤ê³ , ì´ í…Œì´ë¸”ì—ì„œ í‚¤ë¥¼ ìƒì„±í•˜ì—¬ ì´ë¥¼ PKë¡œ ì‚¬ìš©
	2. Identity: PKì»¬ëŸ¼ì—ì„œ ìƒì„±ëœ ê°’ì„ PKë¡œ ì‚¬ìš©
	3. Sequence : ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ í‚¤ ìƒì„±, ì´ë¥¼ PKë¡œ ì‚¬ìš©
	4. Auto: JPAêµ¬í˜„ì²´ê°€ ê¸°ë³¸ í‚¤ ìƒì„± ë°©ì‹ì„ ìŠ¤ìŠ¤ë¡œ ê²°ì •
```
- ìŠ¤í”„ë§ ë°ì´í„° ë ˆí¬ì§€í† ë¦¬
```java
@Repository
public interface ProfileRepository extends CrudRepository<Profile, Long> {
}
=> ì¸í„°í˜ì´ìŠ¤ ë‚´ìš©ì´ ë¹„ì–´ìˆë”ë¼ë„ spring data jpaê°€ ëŸ°íƒ€ì„ì— ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ.
ë•ë¶„ì— ì¸í„°í˜ì´ìŠ¤ ë‚´ìš©ì„ ë”°ë¡œ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ì ì¸ CRUD ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ.
```
- ì£¼ìš” annotation
```java
@Repository: ì´ ë¦¬í¬ì§€í† ë¦¬ê°€ ìŠ¤í”„ë§ ë¦¬í¬ì§€í† ë¦¬ë¡œ ì‚¬ìš©ëœë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤Œ.
- ë‘ ê°€ì§€ ëª©ì 
1. ìë™ ê°ì§€: @Component ì–´ë…¸í…Œì´ì…˜ì„ í¬í•¨í•˜ê³  ìˆì–´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê³¼ì •ì—ì„œ íƒì§€ë¨.
2. ì˜ˆì™¸ ë³€í™˜: Exceptionì€ JPA êµ¬í˜„ì²´(í•˜ì´ë²„ë„¤ì´íŠ¸, ì´í´ë¦½ìŠ¤ë§í¬, ...)ì— ë”°ë¼ ë‹¬ë¼ì§
	=> ê°ê° ë‹¤ë¥¸ ì˜ˆì™¸ë¥¼ í•˜ë‚˜í•˜ë‚˜ ì²˜ë¦¬í•´ì¤„ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì´ë¥¼ ë³€í™˜í•˜ëŠ” ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•¨ => @Repositoryìœ¼ë¡œ í•´ê²°
	=> @RepositoryëŠ” Exceptionì„ DataAccessExceptionìœ¼ë¡œ ë³€í™˜í•´ì¤Œ => DataAccessExceptionë§Œ ì²˜ë¦¬í•´ì£¼ë©´ ë¨.
```

- application.yml
```java
spring.jpa.hibernate.ddl-auto=create
=> ddl-autoëŠ” í•˜ì´ë²„ë„¤ì´íŠ¸ì—ì„œë§Œ ë™ì‘í•˜ëŠ” í”„ë¡œí¼í‹° (ë‹¤ë¥¸ êµ¬í˜„ì²´: spring.jpa.generate-ddl í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©)
1. none: DDLìë™ìƒì„± ê¸°ëŠ¥ ë¹„í™œì„±í™”
2. validate: ì‹¤ì œ DBìŠ¤í‚¤ë§ˆì™€ ìë™ ìƒì„±ë˜ëŠ” DDLì„ ë¹„êµ ê²€ì¦í•´ì„œ ì°¨ì´ê°€ ìˆìœ¼ë©´ DBë°˜ì˜X + ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ì—ëŸ¬ ë°œìƒ
3. update: ì‹¤ì œ DBìŠ¤í‚¤ë§ˆì™€ ìë™ ìƒì„±ë˜ëŠ” DDLì„ ë¹„êµ ê²€ì¦í•´ì„œ ì°¨ì´ê°€ ìˆìœ¼ë©´ DDL ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ì„ DBì— ë°˜ì˜
4. create: ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ ìŠ¤í‚¤ë§ˆì™€ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  ìŠ¤í‚¤ë§ˆë¥¼ ìƒˆë¡œ ìƒì„±
5. create-drop: ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ ìŠ¤í‚¤ë§ˆì™€ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  ìŠ¤í‚¤ë§ˆ ìƒˆë¡œ ìƒì„± + ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œ ìŠ¤í‚¤ë§ˆì™€ ë°ì´í„° ì‚­ì œ
```



## 3.3.2 ì»¤ìŠ¤í…€ ìŠ¤í”„ë§ ë°ì´í„° ë ˆí¬ì§€í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì„œ RDBMSì—ì„œ ë„ë©”ì¸ ê°ì²´ ê´€ë¦¬
- í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ìš”êµ¬ì‚¬í•­ì— ë§ì§€ ì•Šìœ¼ë©´ ì»¤ìŠ¤í…€ ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
- ex) save, findAllë§Œ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš°
  - `MemberBaseRepository.java`
    
  	![image](https://github.com/acrnm148/book-study/assets/67724306/798c07af-0f96-4eec-b34a-e289f5ea2c27)
	```
  	@NoRepositoryBean: í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ
  		=> spring dataê°€ ê°ì§€í•´ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´(í”„ë¡ì‹œ ê°ì²´)ê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•ŠìŒ.
  	```
  - `MemberBaseCustomRepository.java`
    
  	![image](https://github.com/acrnm148/book-study/assets/67724306/85f59ca0-0051-485f-92cb-c5790e8d54ee)
	```
  	@Repository: exception ë³€í™˜ + ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”
  	=> ìƒëµ í•´ë„ ë¬´ë°©. spring dataê°€ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ìë™ìœ¼ë¡œ í•´ì¤Œ
  	```


  - ê²°ê³¼
  ![image](https://github.com/acrnm148/book-study/assets/67724306/a245f9f1-8c51-4377-84da-e4b83d4fa4a8)
  ![image](https://github.com/acrnm148/book-study/assets/67724306/4bcf9b1b-5172-41d8-ab67-08727afc5f6f)
  ```
  @SpringBootTest
  	- ìŠ¤í”„ë§ IoC ì»¨í…Œì´ë„ˆ ì „ì²´ë¥¼ ê¸°ë™í•´ì•¼ í•  í•„ìš”ê°€ ìˆì„ ë•Œ ì í•©
  	- ApplicationContext ê°ì²´ ìƒì„±
  @DataJpaTest
  	- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì „ì²´ê°€ ì•„ë‹Œ ê´€ë ¨ëœ ë¹ˆë§Œ ê¸°ë™í•´ì•¼ í•  í•„ìš”ê°€ ìˆì„ ë•Œ ì í•©
  	- ê²½ëŸ‰ í…ŒìŠ¤íŠ¸
  ```


## 3.4 ìŠ¤í”„ë§ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œ ë°ì´í„° ì¡°íšŒ
### 3.4.1 ì¿¼ë¦¬ë©”ì„œë“œ
- ì¿¼ë¦¬ë©”ì„œë“œê°€ í•„ìš”í•œ ì´ìœ 
  - CrudRepository ì¸í„°í˜ì´ìŠ¤ëŠ” í‘œì¤€ CRUD ì—°ì‚° ì œê³µ => ê¸°ë³¸ ë©”ì„œë“œë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•¨.
  - like, 2ê°œ ì´ìƒ í”„ë¡œí¼í‹°ë¡œ ë‚´ë¦¼ì°¨ìˆœ ë“±
    
- ì¿¼ë¦¬ ë©”ì„œë“œ ì •ì˜í•˜ëŠ” ë°©ì‹
  1. ë©”ì„œë“œ, íŒŒë¼ë¯¸í„° **ì´ë¦„ì„ ì •í•´ì§„ ê·œì¹™ì— ë§ê²Œ ì •ì˜** -> spring data jpaê°€ ë©”ì„œë“œ ì´ë¦„ì„ íŒŒì‹±í•´ì„œ ì¿¼ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ê³  ì‹¤í–‰í•¨.
  2. ë ˆí¬ì§€í† ë¦¬ **ë©”ì†Œë“œì— ì¿¼ë¦¬ë¬¸ì„ ì§ì ‘ ì§€ì •** -> ì§€ì •í•œ ì¿¼ë¦¬ë¬¸ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ
     1. @NamedQuery -> ì¿¼ë¦¬ë¬¸ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ í´ë˜ìŠ¤ì— ì¶”ê°€
     2. @Query -> ì¿¼ë¦¬ë¬¸ì„ ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ì— ì¶”ê°€
     3. @QueryDSL 
        
  - ì¿¼ë¦¬ ë©”ì„œë“œ êµ¬ì¡°

    ![image](https://github.com/acrnm148/book-study/assets/67724306/07f1ebb0-daa5-4684-b8dc-bed679ebffaf)



### 3.4.2 ì»¤ìŠ¤í…€ ì¿¼ë¦¬ë©”ì„œë“œ ì •ì˜
- ì •í•´ì§„ ê·œì¹™ì„ ë”°ë¥´ëŠ” ì´ë¦„ì˜ ì¿¼ë¦¬ ë©”ì„œë“œë¥¼ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ì •ì˜í•´ì„œ ì‚¬ìš©

    ![image](https://github.com/acrnm148/book-study/assets/67724306/616e0217-b9fa-46ad-88f6-c105e22a816b)
  ```
  Iterable : ë°˜ë³µìœ¼ë¡œ ì¡°íšŒ
  Stream : ìŠ¤íŠ¸ë¦¼ ë°©ì‹ìœ¼ë¡œ ì¡°íšŒ
  ```

### 3.4.3 PagingAndSortingRepositoryë¥¼ í™œìš©í•œ í˜ì´ì§•

- Pageable ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©

![image](https://github.com/acrnm148/book-study/assets/67724306/f9e00cb6-dfad-427f-b31f-d5e991d2571f)


![image](https://github.com/acrnm148/book-study/assets/67724306/54ae1e92-fd07-4de5-91d3-739c656435f8)
![image](https://github.com/acrnm148/book-study/assets/67724306/2ff36b90-e8c1-42f1-9f6e-043528f5f713)




### 3.4.5 @NamedQueryë¥¼ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬
- NamedQuery : ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°ì™€ ì—°ê³„ë¼ ìˆëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ì¿¼ë¦¬
- 4ê°œ ì†ì„±
  ```
  name (í•„ìˆ˜)
  query (í•„ìˆ˜)
  lockMode
  hints
  ```
- ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ ì‚¬ìš©í•˜ë ¤ë©´ @NamedNativeQuery
- ë‹¨ì 
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ í´ë˜ìŠ¤ì™€ ë°ì´í„° ì €ì¥/ì¡°íšŒì˜ ê²°í•©ë„ê°€ ë†’ë‹¤. (ë³¸ì§ˆì ìœ¼ë¡œ í•„ìš”X)

### 3.4.6 @NamedQuery í™œìš©
1. ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ í´ë˜ìŠ¤ ì•ˆì— ì¿¼ë¦¬ ì •ì˜
   
   	![image](https://github.com/acrnm148/book-study/assets/67724306/4cf10293-97cc-4237-8032-282720e85043)

2. ë ˆí¬ì§€í† ë¦¬ì— ê°™ì€ ì´ë¦„ì˜ ë©”ì„œë“œ ì¶”ê°€
   
   	![image](https://github.com/acrnm148/book-study/assets/67724306/b361d9ac-f943-4790-bf98-23ff752bcf50)

3. ê²°ê³¼
   
   	![image](https://github.com/acrnm148/book-study/assets/67724306/8df6a613-5a73-478b-98f3-7760b5f780d7)

	![image](https://github.com/acrnm148/book-study/assets/67724306/13d0f2d1-24ad-4379-aece-586bb5bbb2e8)
	![image](https://github.com/acrnm148/book-study/assets/67724306/cf8b0482-ebb9-4efe-b59f-44b80a9bbd42)
   ![image](https://github.com/acrnm148/book-study/assets/67724306/195fc444-1767-4750-910a-0f28d283d746)



## 3.5 @Queryë¡œ ì¿¼ë¦¬ë¬¸ ì§€ì •
- ì¿¼ë¦¬ë¬¸(JPQL)ì„ ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì•ˆì— ì¶”ê°€í•˜ëŠ” ë°©ë²•
- ì¥ì 
  - ì¿¼ë¦¬ë©”ì†Œë“œì™€ JPQLì„ í•œ ê³³ì— ë‘˜ ìˆ˜ ìˆë‹¤.
  - ë°ì´í„°ë² ì´ìŠ¤ì— íŠ¹í™”ëœ ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- `MemberQueryRepository.java`
  
	![image](https://github.com/acrnm148/book-study/assets/67724306/ee542cab-3204-48d2-b844-dd8d978d3935)

- ê²°ê³¼
	- ì¡°íšŒ
    
  	![image](https://github.com/acrnm148/book-study/assets/67724306/18c8308b-eac4-4d60-b2c7-a88e33fdc25a)
  	![image](https://github.com/acrnm148/book-study/assets/67724306/8fcd646a-5189-4706-b22f-da959f4a4b85)

  	- ìˆ˜ì •
  	  
  	![image](https://github.com/acrnm148/book-study/assets/67724306/bdd25f31-a392-47be-88a7-d4b7de6cbcec)
	![image](https://github.com/acrnm148/book-study/assets/67724306/0412f055-1e30-4f53-a313-fcb1b4d1ecf6)
	```
 	- íŒŒë¼ë¯¸í„° ì§€ì • ë°©ì‹
	  1. ìœ„ì¹˜ ê¸°ë°˜ íŒŒë¼ë¯¸í„° ì§€ì • ë°©ì‹ (?1)
	  2. ë„¤ì„ë“œ íŒŒë¼ë¯¸í„° ë°©ì‹ (:memberId)

 	- ì–´ë…¸í…Œì´ì…˜
 	@Transactional - í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì²˜ë¦¬ë˜ê²Œ í•¨.
 	@Modifying - ì¡°íšŒê°€ ì•„ë‹Œ ìˆ˜ì • ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤Œ.
 		=> @Queryì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼í•¨
 		=> @Queryë¡œ ì¸í•œ ë°ì´í„° ë³€ê²½(update, insert, delete) DDL ì‹¤í–‰ ì‹œ ì‚¬ìš©
 	```

## â“ save( ) vs saveAll( )
- save( ) : `1948ms`

  ![image](https://github.com/acrnm148/book-study/assets/67724306/0b62c53c-cd64-43dc-8826-aa1080bc8eb6)
  ![image](https://github.com/acrnm148/book-study/assets/67724306/d011ff96-5cd1-4b27-889f-2cc933d6f8f5)
    
- saveAll( ) : `944ms`

  ![image](https://github.com/acrnm148/book-study/assets/67724306/dc9b2163-9d24-4e6e-a21b-e962fb60eb23)
  ![image](https://github.com/acrnm148/book-study/assets/67724306/d8fc7477-036a-44b3-9562-886a87136c70)

```
save, saveAll ëª¨ë‘ ë‹¨ ê±´ ì‚½ì…ì¸ë°, ì™œ ì„±ëŠ¥ì°¨ì´ê°€ ë°œìƒí•˜ë‚˜?

```

## â“ ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬

![image](https://github.com/acrnm148/book-study/assets/67724306/3b39bb5b-e5dd-49bd-8380-2f4566682554)

```
bulkì—°ì‚° ì´í›„ì—ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‚ ë ¤ë²„ë ¤ì•¼ í•¨.
bulkì—°ì‚° ì‹¤í–‰ í›„ ë³€ê²½ëœê±¸ ëª¨ë¦„.
```













