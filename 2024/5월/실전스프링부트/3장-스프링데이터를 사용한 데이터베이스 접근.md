## 3.1

## 3.2

## 3.3 CrudRepository 인터페이스를 사용해서 CRUD 연산을 수행하는 방법
📌 spring-data와 spring-data-commons 모듈
```
[build.gradle]
...
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
implementation 'org.springframework.boot:spring-boot-starter-data-redis'
...
```
- 스프링 프레임워크만 보더라도 core, test, MVC 등 여러 모듈이 있고
  스프링 프레임워크, 스프링 부트, 스프링 데이터, 스프링 클라우드 등 여러 프로젝트들이 존재함.
- [공식문서](https://spring.io/projects/spring-data)
  
![image](https://github.com/acrnm148/book-study/assets/67724306/71211ea7-f2da-4af5-af3a-51b6b844d21b)

- spring-data
  - 기본 데이터 저장소(DB)에 대한 특성은 유지하며, 데이터 접근 방법에 대해 친숙한 접근 방법을 제시하는 Spring 기반 프로그래밍 모델.
  - 각각의 데이터베이스에 대해 만들어진 특정한 하위 프로젝트들로 구성된 우산형 프로젝트.
  - CRUD 동작이 필요. Spring data는 Repository라는 인터페이스를 제공, 각 데이터 저장소는 이 Repository를 구현하여 자신의 데이터 저장소에 맞는 repository를 제공한다.
    - ex) JpaRepository, MongoRepository ...
  - 구성
  
![image](https://github.com/acrnm148/book-study/assets/67724306/7a75017a-91ee-45b9-8b85-c40bacf5fb53)
![image](https://github.com/acrnm148/book-study/assets/67724306/38948101-730d-4e9b-a1c8-d8f586f8d8a0)
- [spring-data-commons](https://github.com/spring-projects/spring-data-commons/tree/main/src/main/java/org/springframework/data/repository) : Repsotiroy 인터페이스, CrudRepository, PagingAndSortingRepository, ...
- 하위 프로젝트들 : spring-data-jpa, spring-data-redis ...

❓ [Starters](https://github.com/spring-projects/spring-boot/tree/main/spring-boot-project/spring-boot-starters)
  - spring-boot-starter는 응용 프로그램에 종속성을 포함시킴으로써 필요한 모든 관련 기술을 원스톱으로 이용할 수 있는 '편리한 종속성 세트'


### 1. Repository 인터페이스
- `spring-data-commons` 모듈에 포함되어 있음.
- spring data repository 모듈은 Repository 인터페이스를 사용해서 데이터 소스 접근을 추상화
- Repository 인터페이스는 `도메인 클래스` + `식별자 타입`을 필요로 한다.
  - 도메인 클래스 = DB에 저장되어 관리되는 비즈니스 엔티티 클래스
- 메서드나 상수를 포함 X, 오직 객체의 런타임 타입 정보만을 알려주는 마커 인터페이스

### 2. CrudRepository
- Repository 인터페이스를 상속받은 하위 인터페이스
- CRUD 연산을 포함하고 있음.
- 제너릭 타입 T : 도메인 클래스, ID : 도메인 클래스의 식별자
```java
@NoRepositoryBean
public interface CrudRepository<T, ID> extends Repository<T, ID> {
	<S extends T> S save(S entity);
	<S extends T> Iterable<S> saveAll(Iterable<S> entities);
	Optional<T> findById(ID id);
	boolean existsById(ID id);
	Iterable<T> findAll();
	Iterable<T> findAllById(Iterable<ID> ids);
	long count();
	void deleteById(ID id);
	void delete(T entity);
	void deleteAllById(Iterable<? extends ID> ids);
	void deleteAll(Iterable<? extends T> entities);
	void deleteAll();
}
```

### 3. PagingAndSortingRepository 인터페이스
- CrudRepository 인터페이스를 상속받는 인터페이스
- 페이징, 정렬 기능 포함
```java
@NoRepositoryBean
public interface PagingAndSortingRepository<T, ID> extends Repository<T, ID> {
	Iterable<T> findAll(Sort sort);
	Page<T> findAll(Pageable pageable);
}
```


## 3.3.1 스프링 데이터 JPA를 사용해서 도메인 객체를 RDBMS에서 관리
- 도메인 클래스
```java
```
- 주요 annotation
```java
@Entity : JPA로 관리되는 엔티티 클래스
@Table : 저장될 테이블에 대한 정보
@Column : 자바 필드 정보와 테이블 컬럼 정보를 매핑
@Id : 테이블의 PK => JPA에 의해 자동 생성되므로 생성자에는 id필드가 포함돼있지 않음.
@GeneratedValue : 식별자로 사용되는 id값이 자동 생성됨 => 자동 생성 전략을 지정할 수 있음.
```
- 커스텀 스프링 데이터 레포지토리
```java
```
- 주요 annotation
```java
```
