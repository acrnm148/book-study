> - [3.1](3.1)
> - [3.2](3.2)
> ##### λΉ„μ¦λ‹μ¤ λ„λ©”μΈ κ°μ²΄, μ—”ν‹°ν‹°λ¥Ό κ΄€λ¦¬ν•λ” λ°©λ²•
> - [3.3 CrudRepository μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•΄μ„ CRUD μ—°μ‚°μ„ μν–‰ν•λ” λ°©λ²•](#3.3-CrudRepository-μΈν„°νμ΄μ¤λ¥Ό-μ‚¬μ©ν•΄μ„-CRUD-μ—°μ‚°μ„-μν–‰ν•λ”-λ°©λ²•)
> ##### DBλ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ ν™μ©ν•λ” λ°©λ²•
> - [3.4 μ¤ν”„λ§ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν• λ°μ΄ν„° μ΅°ν](#3.4-μ¤ν”„λ§-λ°μ΄ν„°λ¥Ό-μ‚¬μ©ν•-λ°μ΄ν„°-μ΅°ν)


## 3.1

## 3.2

## 3.3 CrudRepository μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•΄μ„ CRUD μ—°μ‚°μ„ μν–‰ν•λ” λ°©λ²•
π“ spring-dataμ™€ spring-data-commons λ¨λ“
```
[build.gradle]
...
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
implementation 'org.springframework.boot:spring-boot-starter-data-redis'
...
```
- μ¤ν”„λ§ ν”„λ μ„μ›ν¬λ§ λ³΄λ”λΌλ„ core, test, MVC λ“± μ—¬λ¬ λ¨λ“μ΄ μκ³ 
  μ¤ν”„λ§ ν”„λ μ„μ›ν¬, μ¤ν”„λ§ λ¶€νΈ, μ¤ν”„λ§ λ°μ΄ν„°, μ¤ν”„λ§ ν΄λΌμ°λ“ λ“± μ—¬λ¬ ν”„λ΅μ νΈλ“¤μ΄ μ΅΄μ¬ν•¨.
- [κ³µμ‹λ¬Έμ„](https://spring.io/projects/spring-data)
  
![image](https://github.com/acrnm148/book-study/assets/67724306/71211ea7-f2da-4af5-af3a-51b6b844d21b)

- spring-data
  - κΈ°λ³Έ λ°μ΄ν„° μ €μ¥μ†(DB)μ— λ€ν• νΉμ„±μ€ μ μ§€ν•λ©°, λ°μ΄ν„° μ ‘κ·Ό λ°©λ²•μ— λ€ν•΄ μΉμ™ν• μ ‘κ·Ό λ°©λ²•μ„ μ μ‹ν•λ” Spring κΈ°λ° ν”„λ΅κ·Έλλ° λ¨λΈ.
  - κ°κ°μ λ°μ΄ν„°λ² μ΄μ¤μ— λ€ν•΄ λ§λ“¤μ–΄μ§„ νΉμ •ν• ν•μ„ ν”„λ΅μ νΈλ“¤λ΅ κµ¬μ„±λ μ°μ‚°ν• ν”„λ΅μ νΈ.
  - CRUD λ™μ‘μ΄ ν•„μ”. Spring dataλ” RepositoryλΌλ” μΈν„°νμ΄μ¤λ¥Ό μ κ³µ, κ° λ°μ΄ν„° μ €μ¥μ†λ” μ΄ Repositoryλ¥Ό κµ¬ν„ν•μ—¬ μμ‹ μ λ°μ΄ν„° μ €μ¥μ†μ— λ§λ” repositoryλ¥Ό μ κ³µν•λ‹¤.
    - ex) JpaRepository, MongoRepository ...
  - κµ¬μ„±
  
![image](https://github.com/acrnm148/book-study/assets/67724306/7a75017a-91ee-45b9-8b85-c40bacf5fb53)
![image](https://github.com/acrnm148/book-study/assets/67724306/38948101-730d-4e9b-a1c8-d8f586f8d8a0)
- [spring-data-commons](https://github.com/spring-projects/spring-data-commons/tree/main/src/main/java/org/springframework/data/repository) : Repsotiroy μΈν„°νμ΄μ¤, CrudRepository, PagingAndSortingRepository, ...
- ν•μ„ ν”„λ΅μ νΈλ“¤ : spring-data-jpa, spring-data-redis ...

β“ [Starters](https://github.com/spring-projects/spring-boot/tree/main/spring-boot-project/spring-boot-starters)
  - spring-boot-starterλ” μ‘μ© ν”„λ΅κ·Έλ¨μ— μΆ…μ†μ„±μ„ ν¬ν•¨μ‹ν‚΄μΌλ΅μ¨ ν•„μ”ν• λ¨λ“  κ΄€λ ¨ κΈ°μ μ„ μ›μ¤ν†±μΌλ΅ μ΄μ©ν•  μ μλ” 'νΈλ¦¬ν• μΆ…μ†μ„± μ„ΈνΈ'


### 1. Repository μΈν„°νμ΄μ¤
- `spring-data-commons` λ¨λ“μ— ν¬ν•¨λμ–΄ μμ.
- spring data repository λ¨λ“μ€ Repository μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•΄μ„ λ°μ΄ν„° μ†μ¤ μ ‘κ·Όμ„ μ¶”μƒν™”
- Repository μΈν„°νμ΄μ¤λ” `λ„λ©”μΈ ν΄λμ¤` + `μ‹λ³„μ νƒ€μ…`μ„ ν•„μ”λ΅ ν•λ‹¤.
  - λ„λ©”μΈ ν΄λμ¤ = DBμ— μ €μ¥λμ–΄ κ΄€λ¦¬λλ” λΉ„μ¦λ‹μ¤ μ—”ν‹°ν‹° ν΄λμ¤
- λ©”μ„λ“λ‚ μƒμλ¥Ό ν¬ν•¨ X, μ¤μ§ κ°μ²΄μ λ°νƒ€μ„ νƒ€μ… μ •λ³΄λ§μ„ μ•λ ¤μ£Όλ” λ§μ»¤ μΈν„°νμ΄μ¤

### 2. CrudRepository
- Repository μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›μ€ ν•μ„ μΈν„°νμ΄μ¤
- CRUD μ—°μ‚°μ„ ν¬ν•¨ν•κ³  μμ.
- μ λ„λ¦­ νƒ€μ… T : λ„λ©”μΈ ν΄λμ¤, ID : λ„λ©”μΈ ν΄λμ¤μ μ‹λ³„μ
  
	![image](https://github.com/acrnm148/book-study/assets/67724306/466c32ce-0fed-4e4c-9ec0-68b244077d90)


### 3. PagingAndSortingRepository μΈν„°νμ΄μ¤
- CrudRepository μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›λ” μΈν„°νμ΄μ¤
- νμ΄μ§•, μ •λ ¬ κΈ°λ¥ ν¬ν•¨
  
	![image](https://github.com/acrnm148/book-study/assets/67724306/5d82fd5e-2a11-48eb-9110-41f4c6239e84)



## 3.3.1 μ¤ν”„λ§ λ°μ΄ν„° JPAλ¥Ό μ‚¬μ©ν•΄μ„ λ„λ©”μΈ κ°μ²΄λ¥Ό RDBMSμ—μ„ κ΄€λ¦¬
- λ„λ©”μΈ ν΄λμ¤
```java
@Entity
@Table(name="PROFILE")
@AllArgsConstructor
@NoArgsConstructor
public class Profile {
    @Id
    @Column(name = "mmbr_num")
    private Long memberNum;

    @Column(name = "ncnm")
    private String nickName;

    @Column(name = "pfile_phtg_file_urladrs")
    private String imgUrl;
}
```
- μ£Όμ” annotation
```java
@Entity : JPAλ΅ κ΄€λ¦¬λλ” μ—”ν‹°ν‹° ν΄λμ¤
@Table : ν•΄λ‹Ή μ—”ν‹°ν‹°κ°€ μ €μ¥λλ” ν…μ΄λΈ” μ΄λ¦„ (μ§€μ •ν•΄μ£Όμ§€ μ•μΌλ©΄ μ—”ν‹°ν‹° μ΄λ¦„μ„ ν…μ΄λΈ” μ΄λ¦„μΌλ΅ μ‚¬μ©.)
@Column : μλ°” ν•„λ“ μ •λ³΄μ™€ ν…μ΄λΈ” μ»¬λΌ μ •λ³΄λ¥Ό λ§¤ν•‘ => camelCaseλΌλ©΄ μ»¬λΌλ…μ€ camel_case μ–Έλ”μ¤μ½”μ–΄λ¥Ό μ‚¬μ©ν•΄μ„ λ§λ“¤μ–΄μ§„λ‹¤.
@Id : ν…μ΄λΈ”μ PK (μ μΌν• λ°μ΄ν„°λ΅ μ‹λ³„ν•  μ μλ” μ‹λ³„μ) => β“JPAμ— μν•΄ μλ™ μƒμ„±λλ―€λ΅ μƒμ„±μμ—λ” idν•„λ“κ°€ ν¬ν•¨λΌμμ§€ μ•μ.
@GeneratedValue : μ‹λ³„μλ΅ μ‚¬μ©λλ” idκ°’μ΄ μλ™ μƒμ„±λ¨(κ°λ°μκ°€ μ§€μ •X) => μλ™ μƒμ„± μ „λµμ„ μ§€μ •ν•  μ μμ.
	1. Table: ν‚¤ ν…μ΄λΈ”μ„ λ”°λ΅ λ§λ“¤κ³ , μ΄ ν…μ΄λΈ”μ—μ„ ν‚¤λ¥Ό μƒμ„±ν•μ—¬ μ΄λ¥Ό PKλ΅ μ‚¬μ©
	2. Identity: PKμ»¬λΌμ—μ„ μƒμ„±λ κ°’μ„ PKλ΅ μ‚¬μ©
	3. Sequence : μ‹ν€€μ¤λ¥Ό μ‚¬μ©ν•΄μ„ ν‚¤ μƒμ„±, μ΄λ¥Ό PKλ΅ μ‚¬μ©
	4. Auto: JPAκµ¬ν„μ²΄κ°€ κΈ°λ³Έ ν‚¤ μƒμ„± λ°©μ‹μ„ μ¤μ¤λ΅ κ²°μ •
```
- μ¤ν”„λ§ λ°μ΄ν„° λ ν¬μ§€ν† λ¦¬
```java
@Repository
public interface ProfileRepository extends CrudRepository<Profile, Long> {
}
=> μΈν„°νμ΄μ¤ λ‚΄μ©μ΄ λΉ„μ–΄μλ”λΌλ„ spring data jpaκ°€ λ°νƒ€μ„μ— μΈν„°νμ΄μ¤ κµ¬ν„μ²΄λ¥Ό μλ™μΌλ΅ λ§λ“¤μ–΄μ¤.
λ•λ¶„μ— μΈν„°νμ΄μ¤ λ‚΄μ©μ„ λ”°λ΅ μ‘μ„±ν•μ§€ μ•μ•„λ„ κΈ°λ³Έμ μΈ CRUD μ—°μ‚°μ„ μν–‰ν•  μ μμ.
```
- μ£Όμ” annotation
```java
@Repository: μ΄ λ¦¬ν¬μ§€ν† λ¦¬κ°€ μ¤ν”„λ§ λ¦¬ν¬μ§€ν† λ¦¬λ΅ μ‚¬μ©λλ‹¤λ” κ²ƒμ„ μ•λ ¤μ¤.
- λ‘ κ°€μ§€ λ©μ 
1. μλ™ κ°μ§€: @Component μ–΄λ…Έν…μ΄μ…μ„ ν¬ν•¨ν•κ³  μμ–΄ μ»΄ν¬λ„νΈ μ¤μΊ” κ³Όμ •μ—μ„ νƒμ§€λ¨.
2. μμ™Έ λ³€ν™: Exceptionμ€ JPA κµ¬ν„μ²΄(ν•μ΄λ²„λ„¤μ΄νΈ, μ΄ν΄λ¦½μ¤λ§ν¬, ...)μ— λ”°λΌ λ‹¬λΌμ§
	=> κ°κ° λ‹¤λ¥Έ μμ™Έλ¥Ό ν•λ‚ν•λ‚ μ²λ¦¬ν•΄μ¤„ μ μ—†μΌλ―€λ΅ μ΄λ¥Ό λ³€ν™ν•λ” μ¶”κ°€ μ‘μ—…μ΄ ν•„μ”ν•¨ => @RepositoryμΌλ΅ ν•΄κ²°
	=> @Repositoryλ” Exceptionμ„ DataAccessExceptionμΌλ΅ λ³€ν™ν•΄μ¤ => DataAccessExceptionλ§ μ²λ¦¬ν•΄μ£Όλ©΄ λ¨.
```

- application.yml
```java
spring.jpa.hibernate.ddl-auto=create
=> ddl-autoλ” ν•μ΄λ²„λ„¤μ΄νΈμ—μ„λ§ λ™μ‘ν•λ” ν”„λ΅νΌν‹° (λ‹¤λ¥Έ κµ¬ν„μ²΄: spring.jpa.generate-ddl ν”„λ΅νΌν‹°λ¥Ό μ‚¬μ©)
1. none: DDLμλ™μƒμ„± κΈ°λ¥ λΉ„ν™μ„±ν™”
2. validate: μ‹¤μ  DBμ¤ν‚¤λ§μ™€ μλ™ μƒμ„±λλ” DDLμ„ λΉ„κµ κ²€μ¦ν•΄μ„ μ°¨μ΄κ°€ μμΌλ©΄ DBλ°μX + μ• ν”λ¦¬μΌ€μ΄μ… μ‹μ‘ μ‹ μ—λ¬ λ°μƒ
3. update: μ‹¤μ  DBμ¤ν‚¤λ§μ™€ μλ™ μƒμ„±λλ” DDLμ„ λΉ„κµ κ²€μ¦ν•΄μ„ μ°¨μ΄κ°€ μμΌλ©΄ DDL κΈ°μ¤€μΌλ΅ λ³€κ²½μ‚¬ν•­μ„ DBμ— λ°μ
4. create: κΈ°μ΅΄μ— μ΅΄μ¬ν•λ μ¤ν‚¤λ§μ™€ λ°μ΄ν„°λ¥Ό μ‚­μ ν•κ³  μ¤ν‚¤λ§λ¥Ό μƒλ΅ μƒμ„±
5. create-drop: κΈ°μ΅΄μ— μ΅΄μ¬ν•λ μ¤ν‚¤λ§μ™€ λ°μ΄ν„°λ¥Ό μ‚­μ ν•κ³  μ¤ν‚¤λ§ μƒλ΅ μƒμ„± + μ• ν”λ¦¬μΌ€μ΄μ… μΆ…λ£ μ‹ μ¤ν‚¤λ§μ™€ λ°μ΄ν„° μ‚­μ 
```



## 3.3.2 μ»¤μ¤ν…€ μ¤ν”„λ§ λ°μ΄ν„° λ ν¬μ§€ν† λ¦¬λ¥Ό λ§λ“¤μ–΄μ„ RDBMSμ—μ„ λ„λ©”μΈ κ°μ²΄ κ΄€λ¦¬
- ν”„λ μ„μ›ν¬μ—μ„ μ κ³µν•λ” μΈν„°νμ΄μ¤κ°€ μ”κµ¬μ‚¬ν•­μ— λ§μ§€ μ•μΌλ©΄ μ»¤μ¤ν…€ λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤μ–΄ μ‚¬μ©ν•  μλ„ μλ‹¤.
- ex) save, findAllλ§ μ‚¬μ©ν•λ ¤λ” κ²½μ°
  - `MemberBaseRepository.java`
    
  	![image](https://github.com/acrnm148/book-study/assets/67724306/798c07af-0f96-4eec-b34a-e289f5ea2c27)
	```
  	@NoRepositoryBean: ν”„λ΅μ‹ κ°μ²΄κ°€ μƒμ„±λμ§€ μ•μ
  		=> spring dataκ°€ κ°μ§€ν•΄ μΈν„°νμ΄μ¤ κµ¬ν„μ²΄(ν”„λ΅μ‹ κ°μ²΄)κ°€ μλ™μΌλ΅ λ§λ“¤μ–΄μ§€μ§€ μ•μ.
  	```
  - `MemberBaseCustomRepository.java`
    
  	![image](https://github.com/acrnm148/book-study/assets/67724306/85f59ca0-0051-485f-92cb-c5790e8d54ee)
	```
  	@Repository: exception λ³€ν™ + μ»΄ν¬λ„νΈ μ¤μΊ”
  	=> μƒλµ ν•΄λ„ λ¬΄λ°©. spring dataκ°€ μ»΄ν¬λ„νΈ μ¤μΊ” μλ™μΌλ΅ ν•΄μ¤
  	```


  - κ²°κ³Ό
  ![image](https://github.com/acrnm148/book-study/assets/67724306/a245f9f1-8c51-4377-84da-e4b83d4fa4a8)
  ![image](https://github.com/acrnm148/book-study/assets/67724306/4bcf9b1b-5172-41d8-ab67-08727afc5f6f)
  ```
  @SpringBootTest
  	- μ¤ν”„λ§ IoC μ»¨ν…μ΄λ„ μ „μ²΄λ¥Ό κΈ°λ™ν•΄μ•Ό ν•  ν•„μ”κ°€ μμ„ λ• μ ν•©
  	- ApplicationContext κ°μ²΄ μƒμ„±
  @DataJpaTest
  	- μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ „μ²΄κ°€ μ•„λ‹ κ΄€λ ¨λ λΉλ§ κΈ°λ™ν•΄μ•Ό ν•  ν•„μ”κ°€ μμ„ λ• μ ν•©
  	- κ²½λ‰ ν…μ¤νΈ
  ```


## 3.4 μ¤ν”„λ§ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν• λ°μ΄ν„° μ΅°ν
### 3.4.1 μΏΌλ¦¬λ©”μ„λ“
- μΏΌλ¦¬λ©”μ„λ“κ°€ ν•„μ”ν• μ΄μ 
  - CrudRepository μΈν„°νμ΄μ¤λ” ν‘μ¤€ CRUD μ—°μ‚° μ κ³µ => κΈ°λ³Έ λ©”μ„λ“λ§μΌλ΅λ” λ¶€μ΅±ν•¨.
  - like, 2κ° μ΄μƒ ν”„λ΅νΌν‹°λ΅ λ‚΄λ¦Όμ°¨μ λ“±
    
- μΏΌλ¦¬ λ©”μ„λ“ μ •μν•λ” λ°©μ‹
  1. λ©”μ„λ“, νλΌλ―Έν„° **μ΄λ¦„μ„ μ •ν•΄μ§„ κ·μΉ™μ— λ§κ² μ •μ** -> spring data jpaκ°€ λ©”μ„λ“ μ΄λ¦„μ„ νμ‹±ν•΄μ„ μΏΌλ¦¬λ¥Ό μλ™μΌλ΅ λ§λ“¤κ³  μ‹¤ν–‰ν•¨.
  2. λ ν¬μ§€ν† λ¦¬ **λ©”μ†λ“μ— μΏΌλ¦¬λ¬Έμ„ μ§μ ‘ μ§€μ •** -> μ§€μ •ν• μΏΌλ¦¬λ¬ΈμΌλ΅ λ°μ΄ν„° μ΅°ν
     1. @NamedQuery -> μΏΌλ¦¬λ¬Έμ„ λΉ„μ¦λ‹μ¤ λ„λ©”μΈ ν΄λμ¤μ— μ¶”κ°€
     2. @Query -> μΏΌλ¦¬λ¬Έμ„ λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤μ— μ¶”κ°€
     3. @QueryDSL 
        
  - μΏΌλ¦¬ λ©”μ„λ“ κµ¬μ΅°

    ![image](https://github.com/acrnm148/book-study/assets/67724306/07f1ebb0-daa5-4684-b8dc-bed679ebffaf)



### 3.4.2 μ»¤μ¤ν…€ μΏΌλ¦¬λ©”μ„λ“ μ •μ
- μ •ν•΄μ§„ κ·μΉ™μ„ λ”°λ¥΄λ” μ΄λ¦„μ μΏΌλ¦¬ λ©”μ„λ“λ¥Ό λ ν¬μ§€ν† λ¦¬μ—μ„ μ •μν•΄μ„ μ‚¬μ©

    ![image](https://github.com/acrnm148/book-study/assets/67724306/616e0217-b9fa-46ad-88f6-c105e22a816b)
  ```
  Iterable : λ°λ³µμΌλ΅ μ΅°ν
  Stream : μ¤νΈλ¦Ό λ°©μ‹μΌλ΅ μ΅°ν
  ```

### 3.4.3 PagingAndSortingRepositoryλ¥Ό ν™μ©ν• νμ΄μ§•

- Pageable μΈν„°νμ΄μ¤ μ‚¬μ©

![image](https://github.com/acrnm148/book-study/assets/67724306/f9e00cb6-dfad-427f-b31f-d5e991d2571f)


![image](https://github.com/acrnm148/book-study/assets/67724306/54ae1e92-fd07-4de5-91d3-739c656435f8)
![image](https://github.com/acrnm148/book-study/assets/67724306/2ff36b90-e8c1-42f1-9f6e-043528f5f713)




### 3.4.5 @NamedQueryλ¥Ό μ‚¬μ©ν•λ” μΏΌλ¦¬
- NamedQuery : λΉ„μ¦λ‹μ¤ μ—”ν‹°ν‹°μ™€ μ—°κ³„λΌ μλ” λ―Έλ¦¬ μ •μλ μΏΌλ¦¬
- 4κ° μ†μ„±
  ```
  name (ν•„μ)
  query (ν•„μ)
  lockMode
  hints
  ```
- λ„¤μ΄ν‹°λΈ μΏΌλ¦¬ μ‚¬μ©ν•λ ¤λ©΄ @NamedNativeQuery
- λ‹¨μ 
  - λΉ„μ¦λ‹μ¤ λ„λ©”μΈ ν΄λμ¤μ™€ λ°μ΄ν„° μ €μ¥/μ΅°νμ κ²°ν•©λ„κ°€ λ†’λ‹¤. (λ³Έμ§μ μΌλ΅ ν•„μ”X)

### 3.4.6 @NamedQuery ν™μ©
1. λΉ„μ¦λ‹μ¤ λ„λ©”μΈ ν΄λμ¤ μ•μ— μΏΌλ¦¬ μ •μ
   
   	![image](https://github.com/acrnm148/book-study/assets/67724306/4cf10293-97cc-4237-8032-282720e85043)

2. λ ν¬μ§€ν† λ¦¬μ— κ°™μ€ μ΄λ¦„μ λ©”μ„λ“ μ¶”κ°€
   
   	![image](https://github.com/acrnm148/book-study/assets/67724306/b361d9ac-f943-4790-bf98-23ff752bcf50)

3. κ²°κ³Ό
   
   	![image](https://github.com/acrnm148/book-study/assets/67724306/8df6a613-5a73-478b-98f3-7760b5f780d7)

	![image](https://github.com/acrnm148/book-study/assets/67724306/13d0f2d1-24ad-4379-aece-586bb5bbb2e8)
	![image](https://github.com/acrnm148/book-study/assets/67724306/cf8b0482-ebb9-4efe-b59f-44b80a9bbd42)
   ![image](https://github.com/acrnm148/book-study/assets/67724306/195fc444-1767-4750-910a-0f28d283d746)



## 3.5 @Queryλ΅ μΏΌλ¦¬λ¬Έ μ§€μ •
- μΏΌλ¦¬λ¬Έ(JPQL)μ„ λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤ μ•μ— μ¶”κ°€ν•λ” λ°©λ²•
- μ¥μ 
  - μΏΌλ¦¬λ©”μ†λ“μ™€ JPQLμ„ ν• κ³³μ— λ‘ μ μλ‹¤.
  - λ°μ΄ν„°λ² μ΄μ¤μ— νΉν™”λ λ„¤μ΄ν‹°λΈ μΏΌλ¦¬λ„ μ‚¬μ©ν•  μ μλ‹¤.

- `MemberQueryRepository.java`
  
	![image](https://github.com/acrnm148/book-study/assets/67724306/ee542cab-3204-48d2-b844-dd8d978d3935)

- κ²°κ³Ό
	- μ΅°ν
    
  	![image](https://github.com/acrnm148/book-study/assets/67724306/18c8308b-eac4-4d60-b2c7-a88e33fdc25a)
  	![image](https://github.com/acrnm148/book-study/assets/67724306/8fcd646a-5189-4706-b22f-da959f4a4b85)

  	- μμ •
  	  
  	![image](https://github.com/acrnm148/book-study/assets/67724306/bdd25f31-a392-47be-88a7-d4b7de6cbcec)
	![image](https://github.com/acrnm148/book-study/assets/67724306/0412f055-1e30-4f53-a313-fcb1b4d1ecf6)
	```
 	- νλΌλ―Έν„° μ§€μ • λ°©μ‹
	  1. μ„μΉ κΈ°λ° νλΌλ―Έν„° μ§€μ • λ°©μ‹ (?1)
	  2. λ„¤μ„λ“ νλΌλ―Έν„° λ°©μ‹ (:memberId)

 	- μ–΄λ…Έν…μ΄μ…
 	@Transactional - ν•λ‚μ νΈλμ­μ… μ•μ—μ„ μ²λ¦¬λκ² ν•¨.
 	@Modifying - μ΅°νκ°€ μ•„λ‹ μμ • μ‘μ—…μ„ μν–‰ν•λ‹¤λ” κ²ƒμ„ μ•λ ¤μ¤.
 		=> @Queryμ™€ ν•¨κ» μ‚¬μ©ν•΄μ•Όν•¨
 		=> @Queryλ΅ μΈν• λ°μ΄ν„° λ³€κ²½(update, insert, delete) DDL μ‹¤ν–‰ μ‹ μ‚¬μ©
 	```

## β“ save( ) vs saveAll( )
- save( ) : `1948ms`

  ![image](https://github.com/acrnm148/book-study/assets/67724306/0b62c53c-cd64-43dc-8826-aa1080bc8eb6)
  ![image](https://github.com/acrnm148/book-study/assets/67724306/d011ff96-5cd1-4b27-889f-2cc933d6f8f5)
    
- saveAll( ) : `944ms`

  ![image](https://github.com/acrnm148/book-study/assets/67724306/dc9b2163-9d24-4e6e-a21b-e962fb60eb23)
  ![image](https://github.com/acrnm148/book-study/assets/67724306/d8fc7477-036a-44b3-9562-886a87136c70)

```
β“ save, saveAll λ¨λ‘ λ‹¨ κ±΄ μ‚½μ…μΈλ°, μ™ μ„±λ¥μ°¨μ΄κ°€ λ°μƒν•λ‚?
=> save( ) 1λ² λ§λ‹¤ **νΈλμ­μ… Proxy λ΅μ§**μ„ νƒμ΄λ‹¤.
- save : νΈλμ­μ… 300λ² => (begin-insert-commit) x 300
- saveAll : νΈλμ­μ… 1λ² => begin-(insert x 300)-commit

- νΈλμ­μ… Proxy λ΅μ§: @Transactionalμ€ AOP ν”„λ΅μ‹ κΈ°λ°μΌλ΅ **μ™Έλ¶€ Bean κ°μ²΄**κ°€ μμ. μ΄ κ°μ²΄μ ν•¨μλ¥Ό νΈμ¶ν•΄μ•Ό ν•λ‚μ νΈλμ­μ…μΌλ΅ λ¬¶μ„.
- 300λ² insertλ” λ™μΌν•λ‚ νΈλμ­μ… Proxy λ΅μ§μ„ 300λ² νΈμ¶ν•λƒ 1λ² νΈμ¶ν•λƒμ μ°¨μ΄
```
![image](https://github.com/acrnm148/book-study/assets/67724306/91e437bf-6c5c-473c-b06f-27aaf4aad63d)

![image](https://github.com/acrnm148/book-study/assets/67724306/c04161fc-988b-4b50-a236-55ac43c7243e)




## β“ JPA ν”„λ΅μ‹ κ°μ²΄

![image](https://github.com/acrnm148/book-study/assets/67724306/d9773455-dd74-4431-896f-1b84b6caef61)

![image](https://github.com/acrnm148/book-study/assets/67724306/e7953794-bb5f-4daf-863b-a13d60180883)

![image](https://github.com/acrnm148/book-study/assets/67724306/2f92374b-5489-446a-bcd4-7a873f1bace1)

```
- ν”„λ΅μ‹ ν΄λμ¤λ” μ‹¤μ  ν΄λμ¤λ¥Ό μƒμ† λ°›μ•„μ„ λ§λ“¤μ–΄μ§€λ―€λ΅ μ‹¤μ  ν΄λμ¤μ™€ κ²‰λ¨μ–‘μ΄ κ°™λ‹¤.
- λ”°λΌμ„ μ‚¬μ©μ μ…μ¥μ—μ„λ” μ΄κ²ƒμ΄ μ§„μ§ κ°μ²΄μΈμ§€ ν”„λ΅μ‹ κ°μ²΄μΈμ§€ κµ¬λ¶„ν•μ§€ μ•κ³  μ‚¬μ©ν•λ©΄ λλ‹¤.
- ν”„λ΅μ‹ κ°μ²΄λ” μ‹¤μ  κ°μ²΄μ— λ€ν• μ°Έμ΅°(target)λ¥Ό λ³΄κ΄€ν•λ‹¤. κ·Έλ¦¬κ³  ν”„λ΅μ‹ κ°μ²΄μ λ©”μ†λ“λ¥Ό νΈμ¶ν•λ©΄ ν”„λ΅μ‹ κ°μ²΄λ” μ‹¤μ  κ°μ²΄μ λ©”μ†λ“λ¥Ό νΈμ¶ν•λ‹¤.

1. ν”„λ΅μ‹ κ°μ²΄μ— member.getMemberId() νΈμ¶ν•΄μ„ μ‹¤μ  λ°μ΄ν„°λ¥Ό μ΅°νν•¨.
2. ν”„λ΅μ‹ κ°μ²΄λ” μ‹¤μ  μ—”ν‹°ν‹°κ°€ μƒμ„±λμ–΄ μμ§€ μ•μΌλ©΄ μμ†μ„± μ»¨ν…μ¤νΈμ—μ„ μ‹¤μ  μ—”ν‹°ν‹° μƒμ„±μ„ μ”μ²­ν•¨. (=> μ΄κ±Έ μ΄κΈ°ν™”λΌκ³  ν•¨)
3. μμ†μ„± μ»¨ν…μ¤νΈλ” DBλ¥Ό μ΅°νν•΄μ„ μ‹¤μ  μ—”ν‹°ν‹° κ°μ²΄λ¥Ό μƒμ„±ν•¨.
4. ν”„λ΅μ‹ κ°μ²΄λ” μƒμ„±λ μ‹¤μ  μ—”ν‹°ν‹° κ°μ²΄μ μ°Έμ΅°λ¥Ό Member target λ©¤λ²„ λ³€μμ— λ³΄κ΄€ν•¨.
5. ν”„λ΅μ‹ κ°μ²΄λ” μ‹¤μ  μ—”ν‹°ν‹° κ°μ²΄μ getMemberId()λ¥Ό νΈμ¶ν•΄μ„ κ²°κ³Όλ¥Ό λ°ν™ν•¨.
```


## β“ λ²ν¬μ„± μμ • μΏΌλ¦¬

![image](https://github.com/acrnm148/book-study/assets/67724306/3b39bb5b-e5dd-49bd-8380-2f4566682554)

```
bulkμ—°μ‚° μ΄ν›„μ—λ” μμ†μ„± μ»¨ν…μ¤νΈλ¥Ό λ‚ λ ¤λ²„λ ¤μ•Ό ν•¨.
bulkμ—°μ‚° μ‹¤ν–‰ ν›„ λ³€κ²½λκ±Έ λ¨λ¦„.
```




## 3.6 Criteria API μ‚¬μ© (ν¬λΌμ΄ν‹°λ¦¬μ•„)
- JPQL λ‹¨μ 
  1. νƒ€μ… μ•μ •μ„± λ³΄μ¥μ΄ μ—†λ‹¤.
  2. μΏΌλ¦¬ μ •μ  κ²€μ‚¬κ°€ λ¶κ°€λ¥ν•λ‹¤. => λ°νƒ€μ„μ—λ¬λ΅λ§ λ°κ²¬ κ°€λ¥

### 3.6.1 Criteria API ν™μ©
- ν¨κ³Ό
  1. νƒ€μ… μ•μ •μ„± ν™•λ³΄
  2. μλ»λ μΏΌλ¦¬λ΅ μΈν• λ°νƒ€μ„ μ—λ¬ κ°μ† => μ»΄νμΌ νƒ€μ„μ— κ²€μ¦ κ°€λ¥

- λ°©λ²•
  - μΏΌλ¦¬λ¬Έμ„ ν”„λ΅κ·Έλ¨ μ†μ¤ μ½”λ“μ²λΌ μ‘μ„±ν•  μ μμ. (JPQL λΉλ”)
  - μ•„μ£Ό κ°„λ‹¨ν• μΏΌλ¦¬μ§€λ§ μ½”λ“ μ‘μ„±λ‰μ΄ λ„λ¬΄ λ§μ.
    
	![image](https://github.com/acrnm148/book-study/assets/67724306/5ad5c92c-d5bc-442b-95d1-32f6214781e9)



## 3.7 QueryDSL









